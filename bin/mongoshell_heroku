#!/usr/bin/env node
// Generated by LiveScript 1.4.0
(function(){
  var mongoUri, exec, spawn, herokusite, mongourl, login, host, db, user, passwd;
  mongoUri = require('mongo-uri');
  exec = require('shelljs').exec;
  spawn = require('child_process').spawn;
  herokusite = process.argv[2];
  if (herokusite == null) {
    console.log('need to provide herokusite');
    process.exit();
  }
  herokusite = herokusite.split('.herokuapp.com').join('');
  mongourl = exec("heroku config:get MONGODB_URI --app " + herokusite).output.trim();
  if (mongourl === '') {
    mongourl = exec("heroku config:get MONGOLAB_URI --app " + herokusite).output.trim();
  }
  if (mongourl.indexOf('mongodb://') !== 0) {
    console.log('mongourl does not begin with mongodb://');
    process.exit();
  }
  login = mongoUri.parse(mongourl);
  host = login['hosts'][0] + ':' + login['ports'][0];
  db = login['database'];
  user = login['username'];
  passwd = login['password'];
  spawn('mongo', ['-u', user, '-p', passwd, host + "/" + db], {
    stdio: 'inherit'
  });
}).call(this);
